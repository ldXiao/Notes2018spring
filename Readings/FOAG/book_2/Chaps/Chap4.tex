\chapterimage{structure_sheaf.jpg}
\chapter{The structure sheaf, definition of schemes}
\section{The structure sheaf of an affine scheme
}
\begin{definition}
Define $\calo_{\spec A}(D(f))$ to be localization of $A$ at the multiplicative set $S$, where
$$
S:=\{\text{All functions that do not vanish outside $V(f)$ (Do not vanish on $D(f))$}\}.
$$
(i.e., those $g\in A$ such that $V(g)\subset V(f)$ or equivalently $D(f)\subset D(g)$)
\end{definition}
In particular, $\calo_{\spec A}(\emptyset)=\{0\}$, where localize at the multiplicative set of functions $g$ such that $V(g)\subset \spec A$. This multiplicative set includes $0$, hence the localization is $\{0\}$ ring.

\begin{exr}\label{chap4exr:4.1.A}
Show that the natural map $A_f \lrta \calo_{\spec A}(D(f))$ is an isomorphism.
\end{exr}
\begin{proof}
In particular, $S_f:=\{1,f,f^2,...\}$ is a multiplicative subset of the multiplicative set $T$ in the definition of $\calo_{\spec A}(D(f))$, where 
$$
T:=\{\text{All functions that do not vanish outside $V(f)$ (Do not vanish on $D(f))$}\}.
$$
$S_f\subset T$.
There is a natural homomorphism 
$$
A\overset{S_f^{-1}}{\lrta}A_f\overset{\tilde{T}^{-1}}{\lrta}\calo_{\spec A}(D(f)), 
$$
where we have denoted the image of $T$ in $A_f$ by $\tilde{T}$. $g\in S\Llrta D(f)\subset D(g)$

$\Llrta T^{-1}g$ is invertible in $A_f$ by Exercise~\ref{chap3exr:inclusion_distinguished_open}.

$\Llrta$ $\tilde{T}\subseteq A_f^\times$

$\Llrta$ $\tilde{T}^{-1}$ is an isomorphism. $A_f\cong \calo_{\spec A}(D(f))$.
\end{proof}

\begin{exr}
Prove the base identity axiom for any distinguished open $D(f)$. 
\end{exr}
\begin{proof}
Consider the $D(f)=\cup_{i\in I}D(f_i)$. We already showed that $\spec A_f\cong D(f)$ as topological spaces~\ref{chap3exr:specA_f_and_specA/I}. If $D(f)=\cup_{i\in I}D(f_i)=\cup_{i\in I}D(f_i)\cap D(f)=\cup_{i\in I}D(f_if)$.

$D(f_i f)\cong\spec A_{ff_i}$ $A_{ff_i}$ is the localization of $A_f$ at the image of $f_i$. $D(f_i f)$ corresponds to the point $[\scq]\in \spec A_f$ such that $\scq\not\in \frac{f_i}{1}$.

Then $D(f)=\cup_{i\in I}D(f_i)\subset \spec A$ $\Llrta$ $\spec A_f=\cup_{i\in I} D(f_i/1)$

$\calo_{\spec A}(D(f))\cong A_f=\calo_{\spec A_f}(\spec A_f)$. The function restricts to $0$ on each $D(f_i)$ iff its restriction to $D(f_i/1)$ vanishes.

Then the problem reduces to the proved case $D(f)=\spec A$.
\end{proof}

\begin{exr}
Alter this argument appropriately to show base gluability for any distinguished open $D(f)$.
\end{exr}
\begin{proof}
Again, we regard $D(f)\cong \spec A_f$. 

Then $D(f)=\cup_{i\in I}D(f_i)\subset \spec A$ $\Llrta$ $\spec A_f=\cup_{i\in I} D(f_i/1)$.

$\calo_{\spec A}(D(f))\cong A_f=\calo_{\spec A_f}(\spec A_f)$.

The base gluability follows from the special case we have proved for $\spec A=D(f)$.
\end{proof}
\begin{exr}
Suppose $M$ is an $A$-module. Show that the following construction describes a sheaf $M$  on the distinguished base. Define $ \tilde{M}(D(f))$ to be the localization of $M$ at the multiplicative set of all functions that do not vanish outside of $ V(f)$. Define restriction maps $\res_{D(f),D(g)}$ in the analogous way to $\calo_{\spec A}$. Show that this defines a sheaf on the distinguished base, and hence a sheaf on $\spec A$. Then show that this is an $\calo_{\spec A}$-module.
\end{exr}
\begin{proof}
Define $\tilde{M}_{\spec A}(D(f))$ to be localization of $M$ at the multiplicative set $S$, where
$$
S:=\{\text{All functions that do not vanish outside $V(f)$ (Do not vanish on $D(f)$}\}.
$$

\underline{Claim}: $\tilde{M}(D(f))\cong M_f$.

 In particular, $S_f:=\{1,f,f^2,...\}$ is a multiplicative subset of the multiplicative set $S$.

 There is a natural homomorphism 
$$
M\overset{S_f^{-1}}{\lrta}M_f\overset{\tilde{S}^{-1}}{\lrta}\tilde{M}(D(f)), 
$$
where we have denoted the image of $S$ in $A_f$ by $\tilde{S}$. $g\in S\Llrta D(f)\subset D(g)$

$\Llrta T^{-1}g$ is invertible in $A_f$ by Exercise~\ref{chap3exr:inclusion_distinguished_open}.

$\Llrta$ $\tilde{S}\subseteq A_f^\times$

$\Llrta$ $\tilde{S}^{-1}$ is an isomorphism. $M_f\cong \tilde{M}(D(f))$.

Define the restriction map:
 $$
 \res_{D(f),D(g)}: \tilde{M}(D(f))\lrta \tilde{M}(D(g))
 $$
 it is the further localization of modules. The restriction does generate a presheaf on distinguished base because of the functorial property of localization.

 Base identity axiom: Consider the special case where $D(f)=\spec A$. Then $\spec A=\cup_{i\in I} D(f_i)$, there is a finite subcover, say $\cup_{i=1,...,n}D(f_i)=\spec A$, i.e., $(f_1,...,f_n)=A$.

 Suppose $m\in M=\tilde{M}(\spec A)$ such that $\res_{\spec A,D(f_i)} m=0$. Then $f_i^{l_i}m=0,\forall i$. We can choose $N\geq \max \{l_i\}$ such that $f_i^N m=0$. Also $(f_1^N,...,f_n^N)=A$ ($\cup_{i}D(f_i^N)=A$), then we know exist $r_i\in A$ s.t. $\sum_i r_i f_i^N=1$
 $$
 m=\sum_i(r_i f_i^N)m=0.
 $$ 
 The restriction map is injective, hence the base identity axiom holds for $D(f)=\spec A$.

 As for general $D(f)$, we can replace $A$ by $A_f$ so that $D(f)=\spec A_f$. The problem reduces to what we have proved.

 Base gluability axiom: Suppose again $\cup_{i\in I}D(f_i)=\spec A$. We assume in addition $I$ is a finite index set. We have elements
$$
\frac{m_i}{f_i^{l_i}}\in M_{f_i}=\tilde{M}(D(f_i))
$$
Letting $g_i=f_i^{l_i}$ to simplify the notation.
$m_i/g_i$ and $m_j/g_j$ agree  when restricted to intersection $D(f_i)\cap D(f_j)=D(g_i)\cap D(g_j)=D(g_ig_j)$, which means
$$
(g_ig_j)^{n_{ij}}(g_jm_i-g_im_j)=0\in A.
$$
By setting $N=\max\{n_{ij}\}$, we have
$$
(g_ig_j)^{N}(g_jm_i-g_im_j)=0\in A.
$$
Set $b_i=m_ig_i^N$ and $h_i=g_j^{N+1}$, the overlap condition simplifies to 
$$
b_ih_j-b_jh_i=0.
$$
Note that $\cup_i D(f_i)=\cup_i D(h_i)=\spec A$ implies that $\exists r_i\in A$ s.t., $\sum_i r_i h_i=1$. Define 
$$
r=\sum_i r_i b_i.
$$
Then 
$$
rh_j=\sum_i r_i b_i h_j=\sum_i r_i  h_i b_j=b_j
$$
$$
 g_j^{N}(g_jr-m_j)=g_j^{N}(f^{l_j}_jr-m_j)=0
$$
$$
\res_{\spec A,D(f_j)}r=\frac{r}{1}=\frac{m_j}{f_j^{l_j}}\in \tilde{M}(D(f_j)),\forall j
$$

For infinite index set $I$, choose a finite subset $\{1,..,n\}\subset I$ with $\spec A=\cup_i D(f_i)$, we can construct $r$ as above. We will show that for $z\in I-\{1,...,n\}$, $r$ restricts to desired element $m_z\in M_{f_z}$. Repeat the entire process for $\{1,...,n,z\}$ in place of $\{1,..,n\}$ and we get a $r'\in M$ which restricts to $m_i\in M_{f_i}$ for $i=1,..,n$. Then by identity axiom $r=r'$. Hence $r$ restricts to $m_z$ as desired.

We have checked the base gluability in the special case $D(f)=\spec A$. For general $D(f)$, we can replace $A$ with $A_f$ so that $D(f)=\spec A_f$ and the problem reduces to the special case we have solved above.

We have up to now proved that $\tilde{M}$ is a sheaf on the distinguished base. We can recover form it a sheaf on $\spec A$.

Observe that $\tilde{M}(D(f))=M_f$ which is automatically an $A_f$-module ($\calo_{\spec A}$-module). $\tilde{M}$ is $\calo_{\spec A}(D(f))$-module on the distinguished base. And this would also extend to a $\calo_{\spec A}$-module.
\end{proof}





\section{Visualizing schemes II: nilpotents}
\section{Definition of schemes
}

\begin{exr}
Describe a bijection between the isomorphisms $\spec A \lrta \spec A'$ and the ring isomorphisms $A' \lrta A$. Hint: the hardest part is to show that if an isomorphism $\pi: \spec A\lrta \spec A'$ induces an isomorphism $\pi^\#:A' \lrta A$, which in turn induces an isomorphism $\rho: \spec A \lrta  \spec A'$, then $\pi = \rho$. First show this on the level of points; this is (surprisingly) the trickiest part. Then show $\pi = \rho$ as maps of topological spaces. Finally, to show $\pi = \rho$ on the level of structure sheaves, use the distinguished base. Feel free to use insights from later in this section, but be careful to avoid circular arguments. Even struggling with this exercise and failing (until reading later sections) will be helpful.
\end{exr}

\begin{proof}
For simplicity, we replace the notion of topological space $\spec A,\spec A'$ by $X,X'$ respectively. 
Recall what it means by an isomorphism of schemes. An isomorphism of ringed space
$$
\pi:X\cong X' (\text{homeomorphism})
$$
and 
$$
\pi_*\calo_{X}\cong \calo_{X'} (\text{sheaf isomorphism}).
$$

$A=\calo_X(\pi^{-1}(X'))=\pi_*\calo_{X}(X')=\calo_{X'}(X')=A'$. It induces an morphism
$$
\pi^\#:A'\lrta A
$$
$$
\calo_{X'}(X')\ni a'\mapsto a'\in \pi_*\calo_X(X'). 
$$
This $\pi^\#$ in turn would induces a isomorphism $\rho:\spec A\lrta \spec A'$. 
$$
\rho:[\scp]\mapsto [(\pi^\#)^{-1}\scp]
$$

We need to show that $\pi=\rho$. 
$$
\pi:[\scp]\mapsto ?
$$
TO BE ADDED
\end{proof}

\begin{exr}\label{chap4exr:iso_scheme_sidginguished_open}
Suppose $f \in A$. Show that under the identification of $D(f)$ in $\spec A$ with $\spec A_f$, there is a natural isomorphism of ringed spaces $$(D(f), \calo_{\spec A}|_{D(f)}) \cong (\spec A_f, \calo_{\spec A_f} ).$$ Hint: notice that distinguished open sets of $\spec A_f$ are already distinguished open sets in $\spec A$.
\end{exr}
\begin{proof}
By exercise~\ref{chap3exr:specA_f_and_specA/I}, we know $\spec A_f\subset \spec A$ and the Zariski topology on $\spec A_f$ is the subspace topology induced by Zariski topology of $\spec A$. Hence $D(f)\cong \spec A_f$ as topological spaces. In particular, the distinguished base of $\spec A_f$ is induced by  distinguished base of $\spec A$ intersects with $D(f)$. Specifically,
$$
D(f)\cap D(f_i)\cong D(f_i/1)\subset \spec A_f
$$
 On the other hand, by exercise~\ref{chap4exr:4.1.A}, We know $A_f\cong \calo_{\spec A}(D(f)).$ We need to verify that $\calo_{\spec A_f}\cong \calo_{\spec A}|_{D(f)}$
 $$
 \begin{aligned}
 \calo_{\spec A}|_{D(f)}(D(f)\cap D(g))&=\calo_{\spec A}(D(f)\cap D(g))=\calo_{\spec A}(D(fg))\cong A_{fg}\\
 &=(A_f)_{g/1}=\calo_{\spec A_f}(D(g/1)).
 \end{aligned}
 $$
 Because $f$ is invertible in $A_f$. $D(g/f^n)=D(g/1)\cap D(1/f^n)=D(g/1)\cap D(1/1)=D(g/1)$. ( All distinguished open in $\spec A_f$ are of the form.) We know the two sheaves coincide on the distinguished base, which means they are isomorphic.
\end{proof}

\begin{exr}\label{chap4exr:open_subscheme}
If $X$ is a scheme, and $U$ is any open subset, prove that $(U, \calo_X|_U)$ is also a scheme.
\end{exr}
\begin{proof}
Recall the definition of scheme, at any point $x\in X$, there is an open neighborhood $V$ such that $(V,\calo_X|_V)$ is an affine scheme. Assume $(V,\calo_X|_V)\cong (\spec A,\calo_{\spec A})$. This isomorphism says the subset topology on $V$ coincides with the Zariski topology. $U\cap V$ is also an open set in $\spec A$. 

\underline{Claim}: There exists $x\in D(f)\subset U\cap V$ such that $(D(f),\calo_X|_{D(f)})$ is an affine scheme.

Such $D(f)$ always exists because distinguished open form a base of Zariski topology and $D(f)$ can be regarded as open set in $X$. On the other hand, $\calo_X|_{D(f)}=(\calo_X|_U)|_{D(f)}=(\calo_X|_V)|_{D(f)}\cong (\calo_{\spec A})|_{D(f)}\cong \calo_{\spec A_f}$. The last isomorphism by~\ref{chap4exr:iso_scheme_sidginguished_open} 

In $(U,\calo_X|_U)$, there is an open $U\supset D(f)\ni x$ such that
$$
(D(f),(\calo_{X}|_U)|_{D(f)})\cong (\spec A_f,\calo_{\spec A_f}).
$$
which means $(U,\calo_X|_U)$ is also a scheme.
\end{proof}

\begin{exr}
Show that if $X$ is a scheme, then the affine open sets form a base for the Zariski topology.
\end{exr}
\begin{proof}
$x\in X$, and $U$ is an open neighborhood of $x$. We need to verify that there is an affine open set $x\in W\subset U$. 

In Exercise~\ref{chap4exr:open_subscheme}, we proved that $(U,\calo_X(U))$ is open subscheme of $(X,\calo_X)$. Then for each $x\in U$, there is an affine open set $W$ \textbf{in $U$}. But the Zariski topology of $U$ is just the subset topology induced by the Zariski topology of $X$. We know $W$ is also a open set in $X$. Finally, $\calo_X|_W=(\calo_X|_U)|_W$. $W$ is an affine open in $X$ iff $W$ is an affine open in X.  
\end{proof}

\begin{exr}
The disjoint union of schemes is defined as you would expect: it is the disjoint union of sets, with the expected topology, with the expected sheaf.
\begin{enumerate}[label=(\alph*)]
\item Show that the disjoint union of a finite number of affine schemes is also an affine scheme.
\item (a first example of a non-affine scheme) Show that an infinite disjoint union of (nonempty) affine schemes is not an affine scheme. 
\end{enumerate}
\end{exr}
\begin{proof}
\begin{enumerate}[label=(\alph*)]
\item In Exercise~\ref{exr:nonconnected_scheme}, we see that for finite index set $I$:
$$
\coprod_{i\in I}\spec A_i\cong\spec \prod_i A_i
$$
and we need to describe the structure sheaf and verify that
$$
\calo_{\coprod_i \spec A_i}\cong \calo_{\spec \prod_i A_i}.
$$

 Consider the inclusion map $\iota_i: \spec A_i\inj \coprod_i\spec  A_i$
$$
\calo_{\coprod_i\spec  A_i}:= \prod_i (\iota_{i})_*\calo_{\spec A_i}
$$
For $U=\coprod_i U_i\subset \coprod \spec A_i$,
$$
\left(\prod_i (\iota_{i})_* \calo_{\spec A_i}\right)(U)=\prod_i \calo_{\spec A_i}(\iota_i^{-1}U)=\prod_{i}\calo_{\spec A_i}(U_i).
$$ 
On the other hand, the structure sheaf $\calo_{\spec \prod_i A_i}$ has the down to earth definition. We need to verify that they agree on $D(f)$ for $f=(f_1,..f_i,..)\in \prod_i A_i$. It is not hard to check 
$$
D(f)=\coprod_i D(f_i).
$$
$$
\calo_{\spec \prod_i A_i}(D(f))=(\prod_i A_i)_f\overset{?}{=}\prod_i (A_i)_{f_i}=\prod_i\calo_{\spec A_i}(D(f_i))=\calo_{\coprod_i \spec A_i}(D(f))
$$
The equality under question mark need to be checked. We just verify the universal property directly.
\begin{center}
\begin{tikzcd}
R &  &  \\
 & (A\times B)_{(f,g)} \arrow[lu, "\exists u", dashed] & B_g \arrow[l, "\beta"] \arrow[llu, "\phi"'] \\
 & A_f \arrow[u, "\alpha"'] \arrow[luu, "\psi"] & 
\end{tikzcd}
\end{center}
where 
$$
\alpha:\frac{a}{f^n}\mapsto \frac{(a,g^n)}{(f,g)^n}
$$
$$
\beta:\frac{b}{g^m}\mapsto \frac{(f^m,b)}{(f,g)^m}
$$
Given $\phi$ and $\psi$, there is a unique morphism $u$ to make diagram commute.
$$
u:\frac{(a,b)}{(f,g)^k}\mapsto \psi\left(\frac{a}{f^k}\right)\phi\left(\frac{b}{g^k}\right)
$$
\item Exercise~\ref{chap3exr:affine_scheme_quasicompact} shows that the topological space of affine scheme is quasicompact but the infinite disjoint union of affine scheme has infinite many connected components hence can't be quasicompact. For example the cover $\cup_i \spec A_i$ does not have finite subcover.
\end{enumerate}
\end{proof}

\begin{exr}\label{chap4exr:affine_scheme_stalk_localization}
Show that the stalk of $\calo_{\spec A}$ at the point $[\scp]$ is the local ring $A_\scp$.
\end{exr}
\begin{proof}
$$
\calo_{\spec A,[\scp]}=\dirlim_{[\scp]\in U}\calo_{\spec A}(U)
$$
without loss of generality, we can assume each $U$ is a distinguished open $D(f)$ for some $f$. $D(f)\ni [\scp]$ iff $f\notin \scp$ or equivalently $f\in S_\scp=A-\scp$. 

\underline{Claim}: 
$$
\calo_{\spec A,[\scp]}=\dirlim_{[\scp]\in D(f)}\calo_{\spec A}(D(f))=A_\scp,
$$
The index category is now a subset of distinguished base which contain $[\scp]$ and the morphism are inclusions.
\begin{center}
\begin{tikzcd}
A_\scp \arrow[rrr, dashed] &  &  & R \\
 &  &  &  \\
 & \calo_{\spec A}(D(f))=A_f \arrow[r] \arrow[rruu, "\phi_f"] \arrow[luu, "l_f"] & \calo_{\spec A}(D(g))=A_g \arrow[ruu, "\phi_g"] \arrow[lluu, "l_g"'] & 
\end{tikzcd}
\end{center}
If there is a ring $R$ with all morphisms from $A_f$ to it. The image of all $f\in S_\scp$ is invertible in $R$, equivalently, $S_{\scp}\subset R^\times$. Then there is a morphism from $A$ to $R$ by universal property of localization.

Equivalently we have general formula
$$
S^{-1}M=\dirlim_{f\in S}M_f.
$$
The index category is now the partially ordered set $S$, with $f\geq g$ iff $f\in \sqrt{(g)}$, see~\ref{chap3exr:inclusion_distinguished_open} 
\end{proof}
\begin{exr}\label{chap3exr:locally_ringed_space_function_value}\ 
\begin{enumerate}[label=(\alph*)]
\item If $f$ is a function on a locally ringed space $X$, show that the subset of $X$ where $f$ vanishes is closed. (Hint: show that if $f$ is a function on a ringed space $X$, show that the subset of $X$ where the germ of $f$ is invertible is open.)
\item Show that if $f$ is a function on a locally ringed space that vanishes nowhere, then $f$ is invertible.
\end{enumerate}
\end{exr}
\begin{proof}
\begin{enumerate}[label=(\alph*)]
\item $f$ is a function on a ringed space $X$ ($f\in\Gamma(X,\calo_X)$). A germ of $f$ at $p$ is denoted $f_p$, assume $f_p$ is invertible. $\exists g_p\in\calo_{X,p}$ such that $f_pg_p=1\in\calo_{X,p}$, which means $\exists U\ni p$ open such that $(f|_U)(g|_U)=1\in \calo_X(U)$. Then all $f_q$ is invertible for $q\in U$. This means the set in $X$ where germ of $f$ is invertible is open.  In the case of locally ringed space, the complement of subset where $f$ vanishes is just the set where germ of $f$ is invertible. (We don't have good notion of function vanishing on general ringed space.)
\item $f$ vanishes nowhere, then the germ of $f$ is invertible everywhere. Notice that $\{f_p\}_{p\in X}$ consists of compatible germs, then their inverse $\{g_p\}_{p\in X}$ also consists of compatible germs. Check it by hand: for each $g_p,p\in X$, there is an open $V_p\subset X$, and  $\tilde{g}_p\in \calo_X(V_p)$ such that $g_q=\tilde{g}_p|q$. We can just choose $\tilde{g}_p$ to be the representative in the equality $f_pg_p=1$. And by Exercise~\ref{chap2:exr2_compatible germs_glue_to_section}. There is a unique global section to glue to and we name it $g\in\calo_X(X)$. Finally, $fg=1$, because $f_pg_p=1_p=1,\forall p\in X$ by~\ref{chap2exr2.4.A}.
\end{enumerate}
\end{proof}
\section{Three examples}
\begin{exr}
Show that you can glue an arbitrary collection of schemes together. Suppose we are given:
\begin{itemize}
\item  schemes $X_i$ (as $i$ runs over some index set $I$, not necessarily finite), 
\item open subschemes $X_{ij} \subset  X_i$ with $X_{ii} = X_i$,
\item isomorphisms $f_{ij} : X_{ij} \lrta X_{ji}$ with $f_{ii}$ the identity
such that
\item  (the cocycle condition) the isomorphisms ``agree on triple intersections'', i.e., $f_{ik}|_{X_{ij}\cap X_{ik}} = f_{jk}|_{X_{ji}\cap X_{jk}} \circ  f_{ij}|_{X_{ij}\cap X_{ik}}$ (so implicitly, to make sense of the right side, $f_{ij}(X_{ik} \cap X_{ij}) \subset  X_{jk}$).
\end{itemize}
(The cocycle condition ensures that $f_{ij}$ and $f_{ji}$ are inverses. In fact, the hypothesis that $f_{ii}$ is the identity also follows from the cocycle condition.) Show that there is a unique scheme $X$ (up to unique isomorphism) along with open subsets isomorphic to the $X_i$ respecting this gluing data in the obvious sense. (Hint: what is $X$ as a set? What is the topology on this set? In terms of your description of the open sets of $X$, what are the sections of this sheaf over each open set?)
\end{exr}
\begin{proof}
Confer Exercise~\ref{chap3exr:glue_sheaf} so see that we can glue together sheaves on an open cover. The part of structure sheaf on $X$ is constructed similarly. 

The isomorphism of schemes $f_{ij}:X_{ij}\lrta X_{ji}$ can be considered as a homeomorphism  of  topological spaces $f_{ij}:X_{ij}\lrta X_{ji}$ (abuse notion here) together with an isomorphism of sheaves: $h_{ij}:\calo_{X_j}|_{X_{ji}}\lrta (f_{ij})_*\calo_{X_i}|_{X_{ij}}$.

The cocycle condition on topological space still means
$$f_{ik}|_{X_{ij}\cap X_{ik}} = f_{jk}|_{X_{ji}\cap X_{jk}} \circ  f_{ij}|_{X_{ij}\cap X_{ik}}$$
and for structure sheaves it means
$$(f_{ik}^{-1})_*h_{ik}|_{X_{ij}\cap X_{ik}} = (f_{jk}^{-1})_*h_{jk}|_{X_{ji}\cap X_{jk}} \circ (f_{ij}^{-1})_* h_{ij}|_{X_{ij}\cap X_{ik}}$$

For the topological space
$$
X=\coprod_i X_i/\sim,
$$
where $x\sim y$ iff $x\in X_{ij}, y\in X_{ji}$ and $f_{ij}x=y$ for some $i,j$. $X$ is endowed with quotient topology. Denote the quotient map $\pi:\coprod_i X_i\lrta X$
$$
\tau_X=\{U\subset X:\pi^{-1}(U)\in\tau_{\coprod_i X_i}\}.
$$
Then $X_i\overset{\iota_i}{\inj} \coprod_j X_j\overset{\pi}{\lrta}X$ and we denote the composition $g_i:=\pi\circ \iota_i$. $U_i:=g_i(X_i)$ form an open cover of the topological space $X$. $g_i$ is a homeomorphism. The structure sheaf $\calo_{X_i}$ push forward to $\calo_{U_i}:=g_{i*}\calo_{X_i}$ on $U_i$.

Given $x\in X_{ij}$, $g_i(x)=g_j(f_{ij}x)$ because $x\sim f_{ij}x$. Then we can identify $g_i(X_{ij})$ and $g_j(X_{ji})$ as $U_{ij}=U_i\cap U_j$. The cocycle condition of topological homeomorphisms means simply that we can identify $g_{i}(X_{ij}\cap X_{ik})=g_{j}(X_{ji}\cap X_{jk})=g_{k}(X_{kj}\cap X_{ki})$ as $U_{ijk}=U_i\cap U_j\cap U_k$. The sheave isomorphism $h_{ij}$ induces isomorphism of sheaves on $U_{ij}$:
\begin{center}
\begin{tikzcd}
\calo_{X_j}|_{X_{ji}} \arrow[rr, "h_{ij}"] \arrow[dd, "(g_{j})_*"'] &  & (f_{ij})_*\calo_{X_i}|_{X_{ij}} \arrow[dd, "(g_j)_*"] \\
 &  &  \\
(g_j)_*\calo_{X_j}|_{X_{ji}}=\calo_{U_j}|_{U_{ij}} \arrow[rr, "\phi_{ji}"] &  &\calo_{U_i}|_{U_{ij}}=(g_{j})_*(f_{ij})_*\calo_{X_i}|_{X_{ij}},
\end{tikzcd}
\end{center}
where we have used $g_j\circ f_{ij}=g_i$. Also notice that $g_i$ are isomorphism on $X_i$. 
$$
\begin{aligned}
\phi_{ji}&=(g_j)_*h_{ij} (g_j^{-1})_*\\
&= (g_j)_* (f_{ij})_* (f_{ij}^{-1})_*h_{ij} (g_j^{-1})_*\\
&=(g_i)_* (f_{ij}^{-1})_*h_{ij} (g_j^{-1})_*\\
\end{aligned}
$$
Then the cocycle relation translate to the standard cocycle relation in~\ref{chap3exr:glue_sheaf}, $ \phi_{jk} \circ \phi_{ij} = \phi_{ik}$ on $U_i\cap U_j \cap U_k$. Then we can glue up and get a sheaf $\calo_X$ such that $\calo_X|_{U_i}=\calo_{U_i}=g_{i*}\calo_{U_i}$
\end{proof}

\begin{exr}
Show that affine line with doubled origin is not affine scheme.
\end{exr}
\begin{proof}
Denote the affine line with doubled origin by $X$. $X$ is constructed by gluing $X_1:=\affn^1_k=\spec k[u]$ and $X_2:=\affn^1_k=\spec k[t]$ along $X_{12}=\spec [u,1/u]$ and $X_{21}=\spec [t,1/t]$. They glue up by isomorphism $X_{12}\cong X_{21}$, $u\llrta t$. Denote the quotient map $\pi:X_1\coprod X_2\lrta X$.

For an open set $W\subset X$
$$
\calo_X(W)=\calo_{X_1}(\pi^{-1}(W)\cap X_1)\times_{\calo_{X_1}(\pi^{-1}(W)\cap X_1\cap X_2)=\calo_{X_2}(\pi^{-1}(W)\cap X_1\cap X_2)}\calo_{X_2}(\pi^{-1}(W)\cap X_2),
$$
where the notion means fibered product.

We have 
$$
\begin{aligned}
\Gamma(X,\calo_X)&=\calo_{X_1}(\pi^{-1}(X)\cap X_1)\times_{\calo_{X_1}(\pi^{-1}(X)\cap X_{12})=\calo_{X_2}(\pi^{-1}(X)\cap X_{21})}\calo_{X_2}(X\cap X_2)\\
&=\calo_{X_1}(X_1)\times_{\calo_{X_1}(X_{12})=\calo_{X_2}(X_{21})}\calo_{X_2}(X_2)\\
&=k[u]\times_{k[u,1/u]=k[t,1/t]}k[t]\\
&=k[t]
\end{aligned}
$$
The structure sheaf of $X$ is identical as a single affine line. Then $X$ can not be affine because, $X\not\cong \spec \calo_X(X)$.
\end{proof}
\begin{exr}\label{chap4exr:affine_doubled_origin}
Do the same construction with $\affn^1$ replaced by $\affn^2$. You will have defined the affine plane with doubled origin. Describe two affine open subsets of this scheme whose intersection is not an affine open subset.
\end{exr}
\begin{proof}
$X$ is constructed by gluing $X_1=\affn^2=\spec k[s,t]$ and $X_2=\affn^2=\spec k[u,v]$ along
$$
X_{12}=D(s)\cup D(t)=\spec k[s,t,1/s]\cup \spec k[s,t,1/t]
$$ and  
$$
X_{21}=D(u)\cup D(v)=\spec k[u,v,1/u]\cup \spec k[u,v,1/v]
$$ via $s\llrta u, t\llrta v$. (or we can exchange the role of $s,t$, which will not cause any change)
$$
\calo_X(W)=\calo_{X_1}(\pi^{-1}(W)\cap X_1)\times_{\calo_{X_1}(\pi^{-1}(W)\cap X_1\cap X_2)=\calo_{X_2}(\pi^{-1}(W)\cap X_1\cap X_2)}\calo_{X_2}(\pi^{-1}(W)\cap X_2),
$$
In particular,
$$
\begin{aligned}
\Gamma(X,\calo_X)&=\calo_{X_1}(\pi^{-1}(X)\cap X_1)\times_{\calo_{X_1}(\pi^{-1}(X)\cap X_{12})=\calo_{X_2}(\pi^{-1}(X)\cap X_{21})}\calo_{X_2}(X\cap X_2)\\
&=\calo_{X_1}(X_1)\times_{\calo_{X_1}(X_{12})=\calo_{X_2}(X_{21})}\calo_{X_2}(X_2)\\
&=k[s,t]\times_{k[s,t]=k[u,v]}k[u,v]\\
&=k[s,t],
\end{aligned}
$$
where we know $\calo_{X_1)}=k[s,t]$ from example 4.4.1

$U_1=\pi(X_1)$ and $U_2=\pi(X_2)$ are affine open but their intersection $U_{12}=\pi(X_{12})=\pi(X_{21})$ is the affine plain without origin, which is not affine.
\end{proof}

\begin{exr}
Check that the gluing of projective space $\proj^n$ satisfies the cocycle relation, as painlessly as possible. 
\end{exr}
\begin{proof}
The ``Charts'' of projective space
$$
X_i:=\spec k[x_{0/i},x_{1/i},...,x_{n/i}]/(x_{i/i}-1),
$$
$$
X_{ij}:=D(x_{j/i})\subset X_i
$$
$$
X_{ij}\cap X_{ik}=D(x_{j/i})\cap D(X_{k/i})=D(x_{j/i}x_{k/i})\subset X_i
$$
and we have the isomorphism
$$
\begin{aligned}
f_{ij}:X_{ij}&\lrta X_{ji}\\
x_{k/i}&\longmapsto x_{k/j}/x_{k/i}.
\end{aligned}
$$
The cocycle relation on triple intersection should be
$$
f_{ik}|_{X_{ij}\cap X_{ik}} = f_{jk}|_{X_{ji}\cap X_{jk}} \circ  f_{ij}|_{X_{ij}\cap X_{ik}}.
$$
Notice that 
$$
X_{ij}=\spec k[x_{0/i},x_{1/i},...,x_{n/i}, x_{j/i}^{-1}]/(x_{i/i}-1),
$$
and
$$
X_{ij}\cap X_{ik}=\spec k[x_{0/i},x_{1/i},...,x_{n/i}, x_{j/i}^{-1},x_{k/i}^{-1}]/(x_{i/i}-1)
$$
$$
\begin{aligned}
&f_{jk}\circ f_{ij}: \\
&\spec k[x_{0/i},x_{1/i},...,x_{n/i}, x_{j/i}^{-1},x_{k/i}^{-1}]/(x_{i/i}-1)\lrta \spec k[x_{0/k},x_{1/k},...,x_{n/k}, x_{j/k}^{-1},x_{i/k}^{-1}]/(x_{k/k}-1)\\
& f_{jk}\circ f_{ij}:x_{l/i}\mapsto x_{l/j}/_{i/j}\mapsto (x_{l/k}/x_{j/k})/(x_{i/k}/x_{j/k})=x_{l/k}/x_{i/k}=f_{ik}(x_{l/i})
\end{aligned}
$$
\end{proof}

\begin{exr}
Show that the only functions on $\proj^n_k$ are constants ($\Gamma(\proj^n_k,\calo)\cong k$), and hence that $\proj^n_k$ is not affine if $n > 0$.
\end{exr}
\begin{proof}
Consider two open sets $X_i$ and $X_j$ defined in last exercise. Also, we denote $\proj^n_k$ by $X$.
$$
\Gamma(X_i\cup X_j,\calo_X)=\calo_{X_i}(X_{i})\times_{\calo_X(X_{ij})=\calo_X(X_{ji})}\calo_{X_{j}}(X_{j})
$$
polynomials in $\calo_{X_i}(X_i)$ and $\calo_{X_j}(X_j)$ that agree on the intersection $X_{ij}$. 
$$
f\in k[x_{0/i},x_{1/i},...,x_{n/i}]/(x_{i/i}-1)
$$
and
$$
g\in k[x_{0/j},x_{1/j},...,x_{n/j}]/(x_{j/j}-1)
$$
agree when restricted to $X_{ij}$.
$$
f(x_{0/i},x_{1/i},...,x_{n/i})=g\left(\frac{x_{0/i}}{x_{j/i}},\frac{x_{1/j}}{x_{j/i}},...,\frac{x_{n/j}}{x_{j/i}}\right)\in \spec k[x_{0/i},x_{1/i},...,x_{n/i}, x_{j/i}^{-1}]/(x_{i/i}-1)
$$
Then $x_{j/i}$ can not appear in $f$.
$h\in\calo_X(X)$ can restrict to any pair of open sets and agree on the intersection, then must be constant. This solution is intuitive, but  a more rigorous statement is: Given $\omega$ be the base of topology by choosing the open sets contained in a single $X_i$.
$$
\calo_X(U)=\invlim_{B\in\omega, B\subset U} \calo_X(B)
$$
and then check the universal property of $k$.

\end{proof}

\begin{exr}
Show that if $k$ is algebraically closed, the closed points of $\proj^n_k$ may be interpreted in the traditional way: the points are of the form $[a_0,...,a_n]$, where the $a_i$ are not all zero, and $[a_0,...,a_n]$ is identified with $[\lambda a_0,...,\lambda a_n]$ where $\lambda \in k^\times$.
\end{exr}
\begin{proof}
The closed point in $X:=\proj^n_k$ is a point $p\in X$ which is also closed subset of $X$. $X$ is a scheme, for each $x$, we can find an open set $X_i\ni x$ and $X_i,\calo_X|_{X_i}$ is an affine scheme. We can choose $X_i$ as in the former exercise. The closed point in $X$ is also a closed point in $X_i$. By Nullstellensatz, the closed point (maximal ideal) in $k[t_1,...,t_n]$ is exactly of the form $(t_1-a_1,...,t_n-a_n)$, where $k$ is algebraically closed. In this case
$$
\scm=(x_{0/i}-a_0,..,x_{i-1/i}-a_{i-1},x_{i/i}-a_i,x_{i+1/i}-a_{i+1},...,x_{n/i}-a_{n}). \ \ x_{i/i}=a_i=1
$$ 
The same closed point can be identified in another open set $X_j$ as
$$
(x_{0/j}-b_0,..,x_{j-1/j}-b_{j-1},x_{j/j}-b_j,x_{j+1/j}-a_{j+1},...,x_{n/j}-a_{n}),  \ \ x_{j/j}=b_i=1,
$$
$(b_0,..,b_j=1,..,b_n)=\frac{1}{a_j}(a_0,...,a_i=1,...,a_n)$. This justifies our identification of closed point as $[a_0,...,a_n]$
\end{proof}


\section{Projective schemes, and the \textit{Proj} construction
}
\begin{exr}
Consider $\proj^2_k$, with projective coordinates $x_0, x_1$, and $x_2$. (The terminology ``projective coordinate'' will not be formally defined until \S 4.5.8, but you should be able to solve this problem anyway.) Think through how to define a scheme that should be interpreted as $x^2_0 + x^2_1 - x^2_2 = 0$ ``in $\proj^2_k$ ''.
\end{exr}
\begin{proof}
In the open set $X_2$, there is an affine scheme cut out by $x_{0/2}^2+x_{{}1/2}^2-1=0$. It is a closed subset in $\spec k[x_{0/2},x_{1/2}]$ and can be identified as $\spec k[x_{0/2},x_{1/2}]/(x_{0/2}^2+x_{1/2}^2-1)$ as shown in~\ref{chap3exr:specA_f_and_specA/I}.

In all three open charts, we can find
$$
V_0:=\spec k[x_{1/0},x_{2/0}]/(1+x_{1/0}^2-x_{2/0}^2),
$$
$$
V_1:=\spec k[x_{0/1},x_{2/1}]/(x_{0/1}^2+1-x_{2/1}^2),
$$
$$
V_2:=\spec k[x_{0/2},x_{1/2}]/(x_{0/2}^2+x_{1/2}^2-1)
$$
$$
V_{01}=\spec k[x_{1/0},x_{2/0},x_{1/0}^{-1}]/(1+x_{1/0}^2-x_{2/0}^2)
$$
$$
V_{10}=\spec k[x_{0/1},x_{2/1},x_{0/1}^{-1}]/(x_{0/1}^2+1-x_{2/1}^2)
$$
and so on.
We find that the gluing isomorphisms of $X_i$ induces well behaved isomorphisms on $V_i$
$$
g_{01}:V_{01}\lrta V_{10}
$$
induced by 
$$
f_{10}:x_{1/0}\mapsto x_{1/1}/x_{0/1}, x_{2/0}\mapsto x_{2/1}/x_{0/1},
$$
where $x_{i/i}$ are dummy variables that equals $1$. $f_{01}$ induces well-defined morphism of the quotient rings because 
$$
\begin{aligned}
f_{01}:(1+x_{1/0}^2-x_{2/0}^2)\lrta &(1+(x_{1/1}/x_{0/1})^2+(x_{2/1}/x_{0/1})^2)\\
&=(1/x_{0/1})^2(x_{0/1}^2+1-x_{2/1}^2)\\
&=(x_{0/1}^2+1-x_{2/1}^2)
\end{aligned}
$$
$g_{ij}$ also satisfies the cocycle relation because $f_{ij}$ does.

Hence $V_i$ glue up to a closed subscheme in $\proj^2_k$

\end{proof}

\begin{exr}
More generally, consider $\proj^n_A$, with projective coordinates $x_0,..., x_n$. Given a collection of homogeneous polynomials $f_i \in A[x_0,...,x_n]$, make sense of the scheme ``cut out in $\proj^n_A$ by the $f_i$.''
\end{exr}
\begin{proof}
Given a homogeneous polynomial $f_i\in A[x_0,...,x_n]$, we can consider map $x_j\rta x_{j/j}=1$ and $x_{k}\rta x_{k/j}$ so that we get a polynomial in $F_{i,(j)}\in A[x_{i/j},...]$ which no longer homogeneous. Then we can construct the closed subset in affine chart $X_i$ 
$$
U_{i,(j)}:=\spec A[x_{1/j},...,x_{n/j}]/(x_{j/j}-1, F_{i,(j)})
$$
and
$$
U_{i,(j);k,(l)}=\spec A[x_{1/j},...,x_{n/j},x_{l/j}^{-1}]/(x_{j/j}-1, F_{i,(j)}, F_{k,(j)})
$$
$$
U_{k,(l);i,(j)}=\spec A[x_{1/l},...,x_{n/l},x_{j/l}^{-1}]/(x_{l/l}-1, F_{i,(l)}, F_{k,(l)}).
$$
Again the gluing map of $X_i$ 
$$
h_{jl}:x_{m/j}\mapsto x_{m/l}/x_{j/l}
$$
would induce well-defined morphism on the quotient ring. Because 
$$
h_{jl}:F_{k,(j)}\mapsto \frac{1}{x_{j/l}^{n_{jl}}}F_{k,(l)},
$$
where $n_{jl}$ is the degree of $x_{l;j}$ in $F_{k,(j)}$. Denote the induced morphism $g_{i,(j);k,(l)}$. We can similarly verify that the induced morphism satisfies the cocycle relation because $h_{jl}$ does.
$$
g_{i,(j);k,(l)}=g_{p,(j);k,(l)}\circ g_{i,(j);p,(l)}
$$
 Hence we can glue the affine schemes to get a closed subscheme in $\proj^n_A$.
\end{proof}

\begin{exr}\label{chap4exr:homogeneous_ideal_characterization}\ 
\begin{enumerate}[label=(\alph*)]
\item Show that an ideal $I$ is homogeneous if and only if it contains the degree $n$ piece of each of its elements for each $n$.
\item Show that the set of homogeneous ideals of a given $\intg$-graded ring $S_\bullet$ is closed under sum, product, intersection, and radical.
\item 
Show that a homogeneous ideal $I \subset S_\bullet$ is prime if $I\neq S_\bullet$, and if for any homogeneous $a, b \in  S_\bullet$, if $ab \in I$, then $a \in I$ or $b \in I$.
\end{enumerate}
\end{exr}
\begin{proof}
\begin{enumerate}[label=(\alph*)]
\item Want:``$I$ is homogeneous ideal'' $\Llrta$ ``$I$ contains each degree $n$ piece of each element for each degree''

 $\Lrta$:  A homogeneous ideal $I$ is generated by homogeneous elements $\{a_i\in S_{n(i)}\}_{i\in I}$, where $n(i)$ is the degree of $a_i$. A general element looks like $b=\sum_i s_i a_i$. $s_i$ are not necessarily homogeneous, but we can decompose $s$ into homogeneous pieces and verify that homogeneous pieces of $b$ are still generated by $a_i$ which are contained in $I$.

 $\Llta$: $b=\sum_n b_n\in S$, where $b_n$ is homogeneous of degree $n$. We can simply choose the generating set to be the homogeneous pieces of each of the element in $I$. Then $I$ is generated by homogeneous elements. Then we can decompose $I$ as $\oplus_{n\in\intg}I_n$. And $S/I$ has a natural $\intg$-grading.
 \item $I,J$ are homogeneous ideals in $S_\bullet$. It is easy to verify that the $I+J$, $I\cdot J$ and $I\cap J$ are generated by homogeneous elements. As for radicals, 
 $$
 L=\sqrt{I}
 $$
 $x\in L\Llrta x^n\in L$. $x=\sum_{i\in\intg} x_i$ only finitely many of $x_i$ are not zero. Assume d the highest degree of $x$, $deg\  x_d$ is larger than any other homogeneous piece.  Specifically, $x_d^n\in I$ which means $x_i\in L$. Then $x-x_d\in L$, we can induct on this procedure until we find each homogeneous piece of $x$ is contained in $L$. Which means $I$ is homogeneous by $(a)$.
 \item The only if direction is trivial. We only need to check the if direction.

Consider general elements $x=\sum_i^d x_i$ and $y=\sum_i^{k} y_j$, they are finite sums by definition. We can check
$$
\sum_i^d x_i\cdot \sum_j^k y_j=\sum_n\sum_{i+j=n}x_i y_j.
$$
Assume neither $x$ nor $y$ is contained in $I$. Then at least one $x_d$ and $y_k$ are not in $I$. Assume $d,k$ to be maximal with this property.

We can subtract from $x$ the part $\sum_{n>d}x_n$ such that $\tilde{x}=x-\sum_{n>d}x_n\notin I$. Similarly, set $\tilde{y}=y-\sum_{m>k}y_m\notin I$. Then we have $\tilde{x}\tilde{y}\in I$ and the leading homogeneous piece being $x_dy_k$. Then $x_d y_k\in I$, $\Lrta x_d$ or $y_k\notin I$. Contradiction.
\end{enumerate}
\end{proof}

\begin{exr}\ 
\begin{enumerate}[label=(\alph*)]
\item
Show that a graded ring $S_\bullet$ over $A$ is a finitely generated graded ring (over $A$) if and only if $S_\bullet$ is a finitely generated graded $A$-algebra, i.e., generated over $A = S_0$ by a finite number of homogeneous elements of positive degree. (Hint for the forward implication: show that the generators of $S_+$ as an ideal are also generators of $S_\bullet$ as an algebra.)
\item Show that a graded ring $S_\bullet$ over $A$ is Noetherian if and only if $A = S_0$ is Noetherian and $S_\bullet$ is a finitely generated graded ring.
\end{enumerate}
\end{exr}
\begin{proof}
\begin{enumerate}[label=(\alph*)]
\item $\Lrta$: $S_\bullet$ is  a finitely generated graded ring over $A$, which means $S_0=A$ and the irrelevant ideal $S_+$ is finitely generated ideal. Such a graded ring is naturally an $A$-algebra. Assume $S_+$ is finitely generated by as $(s_{1,1},...,s_{n,m_{j}})$ each of degree higher than $s_{i,k}, k\leq m_j$ is of degree $i$. Then a general element in $S_1$ can be expressed as
$$
\sum_j^{m_1} a_j s_{1,j}.
$$
Each element in $S_2$ can be expressed as
$$
\sum_{j}^{m_2}a_{j}s_{2,j}+\sum_{j,k}^{m_1}b_{jk}s_{1,j}s_{1,k}.
$$
And it will also work for any degree, which means $S$ is generated as polynomial $A[s_{i,j}]$ (quotient some relations).

$\Llta$ If a graded ring $S_\bullet$ is finitely generated as an $A$-algebra ($S_0=A$), $S_+=S_\bullet -A$ is finitely generated.
\item $\Llta$: By (a), $S_\bullet$ being a finitely generated graded ring with $S_0=A$ means $S_\bullet$ is finitely generated $A$-algebra. Grading is only an extra structure on $S$, we can proceed by Hilbert basis theorem. If $A$ is Noetherian, the finitely generated $A$-algebra is Noetherian.

$\Lrta$: Graded ring $S_\bullet$ is Noetherian, then every ideal of $S_\bullet$ is finitely generated, specifically, $S_+$ is finitely generated. On the other hand $S_\bullet/S_+\cong A$, is a homomorphic image of a Noetherian ring. Hence $A$ must also be Noetherian.
\end{enumerate}
\end{proof}

\begin{exr}\label{chap4exr:interpreation_projS}
Suppose $f \in S_+$ is homogeneous.
\begin{enumerate}[label=(\alph*)]
\item Give a bijection between the prime ideals of $((S_\bullet)_f)_0$ and the homogeneous prime ideals of $(S_\bullet)_f$. Hint: Avoid notational confusion by proving instead that if $A$ is a $\intg$-graded ring with a homogeneous invertible element $f$ in positive degree, then there is a bijection between prime ideals of $A_0$ and homogeneous prime ideals of $A$. Using the ring map $A_0 \lrta A$, from each homogeneous prime ideal of $A$ we find a prime ideal of $A_0$. The reverse direction is the harder one. Given a prime ideal $P_0 \subset A_0$, define $P \subset A$ (a priori only a subset) as $\oplus Q_i$, where $Q_i \subset A_i$, and $a\in Q_i$ if and only if $a^{\deg f}/f^i\in P_0$ . Note that $Q_0 =P_0$. Show  that $a\in Q_i$ if and only if $a^2\in Q_{2i}$; show that if $a_1,a_2 \in Q_i$ then $a^2_1 +2a_1a_2 +a^2_2 \in Q_{2i}$ and hence $a_1 + a_2 \in Q_i$; then show that $P$ is a homogeneous ideal of $A$; then show that $P$ is prime.
\item Interpret the set of prime ideals of $((S_\bullet)_f)_0$ as a subset of $\Proj S_\bullet$.
\end{enumerate}
\end{exr}
\begin{proof}
\begin{enumerate}[label=(\alph*)]
\item Follow the hint, we avoid the notation trouble by working in  a $\intg$-graded ring $A$ with invertible  homogeneous element $f$ with $\deg f>0$.

\underline{Claim}: There is a bijection between prime ideals of $A_0$ and homogeneous prime ideal of $A$.

There is a natural inclusion $\iota:A_0\inj A$. For a given homogeneous prime ideal $P$ in $A$ we can find a prime ideal $\iota^* P\in A_0$ which is just $P\cap A_0$ which is a prime ideal in $A_0$.

The reverse direction is harder. Consider a prime ideal $P_0\in A_0$, define $P\subset A$ as $P=\oplus Q_i$, where $Q_i\subset A_i$ and a homogeneous element $a\in Q_i$ iff $a^{\deg f}/f^i\in P_0$. Note that $P_0=Q_0$.

\underline{Want}: $P$ is an ideal.
Indeed, for $a\in P$, $b\in A$. $a=\sum_i a_i$, $b=\sum_j b_j$, where each $a_i\in Q_i$ and $b_j\in A_j$. $a_i b_i\in A_{2i}$.
$$
\frac{(a_i b_j)^{\deg f}}{f^{i+j}}=\frac{a_i^{\deg f}}{f^i}\frac{b_i^{\deg f}}{f^j}\in P_0.
$$
Then product is contained in $P_0$ because $a_i^{\deg f}{f^i}\in P_0$ and $b_j^{\deg f}{f^j}\in A_0$ and $P_0$ is a prime ideal in $A_0$. Then we have 
$$
\frac{(a_i b_j)^{\deg f}}{f^{i+j}}\in Q_{i+j}.
$$
Similarly, we can prove $a\cdot b=\sum_i a_i\cdot \sum_i b_i\in P$. 

\underline{subclaim}: $a\in Q_i$ iff $a^2\in Q_i$. 
 one direction is clear and we only need to prove the only if part.
 $$
 \frac{(a^2)^{\deg f}}{f^{2i}}=\frac{(a)^{\deg f}}{f^{i}}\frac{(a)^{\deg f}}{f^{i}}\in P_0\Lrta \frac{(a)^{\deg f}}{f^{i}}\in P_0
 $$
 because $P_0$ is prime ideal.

On the other hand, given $a_1,a_2\in Q_i$
 We have $P$ is an ideal in $A$. We know $a_1^2+2a_1a_2+a_2^2\in Q_{2i}$. Hence by the subclaim, $a_1+a_2\in Q_i$.

Then we know $P$ is closed under summation and multiplication by $A$. ($P$ is an ideal.)

\underline{Want}: $P$ is homogeneous ideal. Recall~\ref{chap4exr:homogeneous_ideal_characterization}, part $(a)$, we only need to prove that $P$ contains  the homogeneous piece of each of its element of each degree. Assume $a\in P$ then $a=\sum_i a_i$ and $a_i\in Q_i$ by definition of $P$. We know $P$ is homogeneous ideal.

\underline{Want}: $P$ is a prime ideal in $A$. See~\ref{chap4exr:homogeneous_ideal_characterization}, part $(c)$. A homogeneous ideal is prime iff it is prime for homogeneous elements. Suppose $a\in A_i, b\in A_j$ and we have $ab\in Q_{ij}$, then by definition
$$
\frac{a^{\deg f}}{f^i}\frac{b^{\deg f}}{f^j}\in P_0
$$
then either $a\in Q_i$ or $b\in Q_j$ because $P_0$ is prime ideal.

We still need to prove that this indeed gives a bijection. The map $\alpha:I\lrta I\cap A_0$ as described above and the map $\beta: P_0\mapsto P$. $\alpha\circ \beta:P_0\mapsto P_0$. $\beta\circ \alpha:I\mapsto I\cap A_0\mapsto? I$.

$$
\beta(I\cap A_0)\supset I
$$
because $x\in I_j$ then $x^{\deg f}/f^j\in I\cap A_0$.

For the reverse inclusion, consider an element $y\in\beta(I\cap A_0)_j$ then by definition $y^{\deg f}/f^j\in I\cap A_0$, then $y^{\deg f}=y^{\deg f}/f^j\cdot f^j\in I_{j\deg f}$ $\Lrta y\in I_j$ because $I$ is prime ideal.

\item We have proved there is bijection between ``prime ideals in $((S_\bullet)_f)_0$'' and homogeneous prime ideals in $(S_\bullet)_f$. Recall the property of localization, there is a one to one homogeneous prime ideals in $(S_\bullet)_f$ and homogeneous prime ideals in $S_\bullet$ that does not intersect $\{f,f^2,...\}\subset S_+$. (Localization preserves the homogeneity of prime ideals.) In particular, these homogeneous prime ideals do not contain $S_+$, therefore they can be interpreted as subset in $\Proj S_\bullet$.
\end{enumerate}
\end{proof}
\begin{exr}\label{chap4exr:projective_affine_open_chart_localization}
Show that $D(f)$ ``is'' (or more precisely, ``corresponds to'') the subset $\spec((S_\bullet)_f)_0$ you described in Exercise~\ref{chap4exr:interpreation_projS}. For example, the $D(x_i)$ are the standard open sets covering projective space.
\end{exr}
\begin{proof}
$D(f)$ is the projective distinguished open set and
$$
\begin{aligned}
D(f)&=\Proj S_\bullet -V(f)\\
&=\{\text{Homogeneous prime ideals that do not contain $f$ or $S_+$}\}\\
&=\{\text{Homogeneous prime ideal that do not contain $f$}\} (f\in S_+)
\end{aligned}
$$
And we have the correspondences:
$$
\begin{aligned}
&\{\text{Homogeneous prime ideals in $S_\bullet$ that do not contain $f$}\}\\
&\llrta (\text{by localization  property})\\
&\{\text{Homogeneous prime ideals in $(S_\bullet)_f$}\}\\
&\llrta (\text{by Exercise~\ref{chap4exr:interpreation_projS}})\\
&\{\text{Prime ideals in $((S_\bullet)_f)_0$}\}\\
&=\spec ((S_\bullet)_f)_0
\end{aligned}
$$
\end{proof}

\begin{exr}
Verify that the projective distinguished open sets $D(f)$ (as $f$ runs through the homogeneous elements of $S_+$) form a base of the Zariski topology.
\end{exr}
\begin{proof}
As in the affine case, the closed set of Zariski's topology is of the form
$$
V(T)=V(\overline{T}).
$$
where $I:=\overline{T}$ is a homogeneous ideal generated by $T$. $\overline{T}\subset S_+$. 

It forms a topology
$$
\cap_i V(J_i)=V(\sum_i J_i)
$$
and 
$$
V(I)\cup V(J)=V(I\cdot J)
$$
and
$$
IV(J)=\sqrt{J}
$$
both are well-defined because \{homogeneous ideals\} is closed under intersection, product, addition and taking radicals.

\underline{Claim}: $\{D(f)\}$ where $f$ is homogeneous element in $S_+$ form a base of the topology.

Given a point $[P]$ in an open set $\Proj S_\bullet-V(I)$ , $P$ is a homogeneous prime ideal in $S_\bullet$ that does not contains $I$. We can find $f\in I\backslash P$. Then by definition 
$$
V(f)\supset V(I)
$$
and
$$
D(f)\subset \Proj S_\bullet-V(I).
$$
Also $P$ does not contain $f$, hence $D(f)\ni [P]$.

Which means $D(f)$ as $f$ ranges over $S_+$ form a base of the Zariski's topology.
\end{proof}

\begin{exr}\label{chap4exr:4.5.H}
Fix a graded ring $S_\bullet$.
\begin{enumerate}[label=(\alph*)]
\item Suppose $I$ is any homogeneous ideal of $S_\bullet$ contained in $S_+$, and $f$ is a homogeneous element of positive degree. Show that $f$ vanishes on $V(I)$ (i.e.,$V(I) \subset V(f)$) if and only if $f^n ? I$ for some $n$. (Hint: Mimic the affine case~\ref{exr:vanishing_set_radical},) In particular, as in the affine case (Exercise~\ref{chap3exr:inclusion_distinguished_open}), if $D(f) \subset D(g)$, then $f^n \in (g)$ for some $n$, and vice versa. (Here $g$ is also homogeneous of positive degree.)
\item If $Z \subset \Proj S_\bullet$, define $I(Z) \subset S_+$. Show that it is a homogeneous ideal of $S_\bullet$. For any two subsets, show that $I(Z_1 \cup Z_2) = I(Z_1) \cap I(Z_2)$.
\item For any subset $Z \subset \Proj S_\bullet$, show that $V(I(Z)) = \overline{Z}$.
\end{enumerate}
\end{exr}
\begin{proof}
\begin{enumerate}[label=(\alph*)]
\item 
If $f^n\in I $ for some $n$, then $f\in P$ for all $P$ homogeneous prime containing $I$ because $P$ is prime. Then $f$ vanishes on $V(I)$.

For the reverse direction, $f$ vanishes on $V(I)$, $V(I)\subset V(f)$. It means all homogeneous prime ideals that containing $I$ but not $S_+$ contains $f$:
$$
f\in \cap_{P\supset I, P\notsupset S_+} P.
$$
Notice when $f$ is homogeneous of positive degree, $f\in S_+$, $f$ is automatically contained in any homogeneous prime that contains $S_+$. the condition $f$ vanishes on $V(I)$ in fact is equivalent to 
$$
f\in\cap_{P\supset I}P.
$$

Note that $I$ itself is homogeneous.

\underline{Claim}: The radical of a homogeneous ideal $I$ is the intersection of all homogeneous prime ideal that contains $I$.

In general, we use $P$ to denote homogeneous prime
$$
\cap_{P\supset I}P\supset \cap_{\scp\supset I}\scp.
$$
For the reverse inclusion, consider $\scp^h$ to be the the homogeneous ideal generated by the homogeneous element of $\scp$. $\scp^h\subset \scp$ is prime on homogeneous elements then $\scp^h$ is homogeneous prime ideal by~\ref{chap4exr:homogeneous_ideal_characterization}. If $\scp$ is any prime containing $I$, then $\scp^h$ also contains $I$, because $\scp^h$ contains the homogeneous elements of $I$, and $I$ as a homogeneous ideal is generated by these homogeneous elements. 
We have
$$
\cap_{P\supset I} P\subset \cap_{\scp\supset I}\scp^h\subset \cap_{\scp\supset I}\scp .
$$
Then we know the intersection of homogeneous primes that containing a homogeneous ideal $I$ is just the radical of $I$.
$$
f\in\cap_{P\supset I}P=\cap_{\scp\supset I}\scp=\sqrt{I}.
$$

Hence exists $n\geq 0$ such that $f^n\in I$.
\item $I(Z)$ is defined to be the element of $S_\bullet$ that vanishes on all of $[P]\in Z$. $Z\subset \Proj S_\bullet$, means each $[P]\in Z$.
 $P$ is homogeneous prime that does not contain $S_+$.

  $f\in I(Z)$ $\Llrta$ $f\in \cap_{[P]\in Z}P$.

  Denote the degree $i$ piece of $f$ by $f_i$. $f\in\cap_{[P]\supset Z}P\Lrta f_i\in P$ $\forall [P]\in Z$, because each $P$ is homogeneous, this in turn means $f_i\in I(Z)$. $I(Z)$ contains each homogeneous piece of each element in it, which implies that $I(Z)$ is a homogeneous ideal. 

  For two subsets $Z_1$ and $Z_2$ in $\Proj S_\bullet$,
  $$
  f\in I(Z_1\cup Z_2)
  $$ 
  $$
  \Llrta
  f\in P,\forall [P]\in Z_1\cup Z_2
  $$
  $$
  \Llrta
  f\in P,\forall [P]\in Z_1\text{ AND }f\in Q,\forall [Q]\in Z_2 
  $$
  $$
  \Llrta f\in I(Z_1) \cap I(Z_2)
  $$
  \item ``$V(I(Z))\supset \overline{Z}$'':
By definition, $V(I(Z))$ is closed set. And $Z\subset V(I(Z))$, because $[P]\in Z, I(Z)=\cap_{[Q]\in Z}Q$ $I(Z)\mod P=0,\Lrta I(Z)\subset P\Lrta [P]\in V(I(Z))$. Closure $\overline{Z}$ is the smallest closed set that contains $Z$, therefore $\overline{Z}\subset V(I(Z))$.

 ``$V(I(Z))\subset \overline{Z}$'': We need to verify that open neighborhood of each point in $V(I(Z))$ intersects with $Z$. Consider a point $[Q]\in V(I(Z))$, we have $Q\supset I(Z)$. Assume  a non-empty distinguished open $D(f)$ contains $[Q]\Llrta f\notin Q \Lrta f\notin I(Z)\Lrta$ $f $ does not vanish on every point in $Z$, $\exists[P]\in Z$, s.t. $f\notin P\Llrta$ $D(f)\ni [P]$, therefore $D(f)\cap V(I(Z))\neq \emptyset$. Hence $V(I(Z))\subset \overline{Z}$.

\end{enumerate}
\end{proof}

\begin{exr}
Fix a graded ring $S_\bullet$, and a homogeneous ideal $I$. Show that the following are equivalent.
\begin{enumerate}[label=(\alph*)]
\item $V(I) = \emptyset$.
\item For any $f_i$ (as $i$ runs through some index set) generating $I$, $\cup_i D(f_i)=\Proj S_\bullet$. 
\item $\sqrt{I}\supset S_+$.
\end{enumerate}
\end{exr}
\begin{proof}
$(a)\Lrta (b)$: Assume $I$ is finitely generated by $\{f_i\}_{i\in J}$. $V(I)=\emptyset$, means $\forall [P]\in \Proj S_\bullet$, $P\notsupset I$. For each $[P]\in \Proj S_\bullet$, $P\not\ni f_i$ for some $f_i\in I$ $\Lrta [P]\in D(f_i)$ for some $f_i$, which means $\Proj S_\bullet \subset \cup_{i\in J} D(f_i)\subset \Proj S_\bullet$.

$(b)\Lrta (c)$: $\Proj S_\bullet = \cup_{i\in J} D(f_i)$ means each homogeneous prime ideal that does not contain $S_+$ in $S_\bullet$ does not contain $I$. The contrapositive says each homogeneous prime ideal contain $I$ would contain $S_+$:
$$
\cap_{P\supset I} P\supset S_+.
$$
By Exercise~\ref{chap4exr:4.5.H}, we know $\sqrt{I}=\cap_{P\supset I} P$ for homogeneous ideal $I$.

$(c)\Lrta (a)$, 
$$
\sqrt{I}=\cap_{P\supset I} P\supset S_+
$$
means for each point $[P]\in \Proj S_\bullet$, $P$ does not contain $I$. $\Lrta$ $[P]\notin V(I)$.

$\Lrta V(I)=\emptyset$.
\end{proof}

\begin{exr}
Suppose some homogeneous $f\in S_+$ is given. Via the inclusion
$$
D(f) = \spec((S_\bullet)_f)_0  \inj \Proj S_\bullet
$$
of Exercise~\ref{chap4exr:projective_affine_open_chart_localization}, show that the Zariski topology on $\Proj S_\bullet$ restricts to the Zariski topology on $\spec((S_\bullet)_f)_0$
\end{exr}
\begin{proof}
We can compare the closed subsets of these two topological space. Consider a subset $I\subset ((S_\bullet)_f)_0$
$$
\begin{aligned}
((S_\bullet)_f)_0\supset V'(I)&=\{ [\scp]\in\spec ((S_\bullet)_f)_0: I\subset \scp\}\\
&\llrta\{[P]\in \Proj (S_\bullet)_f: I^{h}\subset P\}\\
&(I^h\text{ is the homogeneous ideal generated by $I$.})\\
&\llrta\{[Q]\in \Proj S_\bullet: \iota^*(I^h)\subset Q, Q\not\ni f\}\\
&(\iota^*(I^h)\text{ denote the preimage of $I^h$ under localization})
\end{aligned}
$$
where we use $\scp$ to denote ordinary prime ideal and $P$ to mean homogeneous prime ideal. Also $\iota:S_\bullet\inj (S_\bullet)_f$ is the standard inclusion of localization.
$$
\begin{aligned}
((S_\bullet)_f)_0\supset V'(D)
&\llrta\{[Q]\in \Proj S_\bullet: \iota^*(I^h)\subset Q, Q\not\ni f\}\\
&\llrta \{[Q]\in \Proj S_\bullet: Q\supset \iota^*(I^h)\}\cap\{[Q]\in\Proj S_\bullet:Q\not\ni f\}\\
&=V(\iota^*(I^h))\cap D(f)
\end{aligned}
$$

For illustration, consider previous example
$S:=k[x_0,x_1,x_2]$, $S_{x_0}:=k[x_0,x_1,x_2,x_0^{-1}]$, $(S_{x_0})_0:=k[x_1/x_0,x_2/x_0]$. $I=(1+x_{1/0}^2-x_{2/0}^2)_0$ and $I^h=(1+x_{1/0}^2-x_{2/0}^2)$.
$$
V'(I)=V_0:=\spec k[x_{1/0},x_{2/0}]/(1+x_{1/0}^2-x_{2/0}^2),
$$
$\iota^*(I^h)=(x_0^2+x_1^2-x_2^2)$.
$$
V'(I)\llrta D(x_0)\cap V((x_0^2+x_1^2-x_2^2))
$$
\end{proof}


\begin{exr}
If $f, g \in S_+$ are homogeneous and nonzero, describe an isomorphism between $\spec((S_\bullet)_{fg})_0$ and the distinguished open subset $D(g^{\deg f}/f^{\deg g})$ of $\spec((S_\bullet)_f)_0$.
\end{exr}
\begin{proof}
Recall that 
$$
\spec((S_\bullet)_{fg})_0\cong D(fg)\subset \Proj S_\bullet
$$
Then problem reduce to describe the intersection of $D(fg)$ with $\spec ((S_\bullet)_f)_0$.
$$
\begin{aligned}
\spec ((S_\bullet)_{fg})_0&= \{[\scq]\in \spec ((S_\bullet)_{fg})_0:\}\\
&\llrta \{[Q]\in \Proj (S_\bullet)_{fg}\}\\
&\llrta \{[Q]\in\Proj S_\bullet:Q\not\ni fg\}\\
&\llrta \{[Q]\in\Proj S_\bullet:Q\not\ni f\} \cap \{[Q]\in\Proj S_\bullet: Q\not\ni g\}\\
&\llrta \{[P]\in \Proj (S_\bullet)_f: P\not\ni \frac{g}{1}\}\\
&\llrta\{ [\scp]\in\spec ((S_\bullet)_f)_0: \scp\not\ni\frac{g^{\deg f}}{f^{\deg g}}\}
\end{aligned}
$$
We only have to explain the last bijection. $\scp=P\cap ((S_\bullet)_f)_0$ and if $P\not\ni g/1$, we have $\scp\not\ni g^{\deg f}/f^{\deg g}$. For the reverse direction, we have to recall the construction in~\ref{chap4exr:interpreation_projS}, $g/1\notin P_{\deg g}$ iff $g^{\deg f}/f^{\deg g}\notin \scp=P_0$.
\end{proof}

Before finishing the definition, we have to collect some results about graded ring here in order to construct the isomorphism of sheaves on intersections.
\begin{theorem}
\label{lemma-standard-open}
Let $S_\bullet$ be a graded ring. Let $f \in S_\bullet$ homogeneous of positive degree.
\begin{enumerate}
\item If $g\in S$ homogeneous of positive degree
and $D(g) \subset D(f)$, then
\begin{enumerate}
\item $f$ is invertible in $(S_\bullet)_g$, and
$f^{\deg(g)}/g^{\deg(f)}$ is invertible in $S_{(g)}$,
\item $g^e = af$ for some $e \geq 1$ and $a \in S$ homogeneous,
\item there is a canonical $S_\bullet$-algebra map $(S_\bullet)_f \to (S_\bullet)_g$,
\item there is a canonical $(S_\bullet)_0$-algebra map $((S_\bullet)_{f})_0 \to ((S_\bullet)_{g})_0$
compatible with the map $(S_\bullet)_f \to (S_\bullet)_g$,
\item the map $((S_\bullet)_{f})_0 \to ((S_\bullet)_{g})_0$ induces an isomorphism
$$
(((S_\bullet)_{f})_0)_{g^{\deg(f)}/f^{\deg(g)}} \cong ((S_\bullet)_{g})_0,
$$
\item there are compatible canonical $S_\bullet)_{f}$ and $((S_\bullet)_{f})_0$-module
maps $(M_\bullet)_f \to (M_\bullet)_g$ and $((M_\bullet)_f)_0 \to ((M_\bullet)_g)_0$ for any graded $S_\bullet$-module $M_\bullet$,
and
\item the map $((M_\bullet)_{f})_0 \to((M_\bullet)_{g})_0$ induces an isomorphism
$$
(((M_\bullet)_{f})_0)_{g^{\deg(f)}/f^{\deg(g)}} \cong ((M_\bullet)_{g})_0.
$$
This is a horrible notation, where the first and third subscripts means grading while second and forth means localizations. 
\end{enumerate}
\item Any open covering of $D_{+}(f)$ can be refined to a finite
open covering of the form $D_{+}(f) = \bigcup_{i = 1}^n D_{+}(g_i)$.
\item Let $g_1, \ldots, g_n \in S$ be homogeneous of positive degree.
Then $D_{+}(f) \subset \bigcup D_{+}(g_i)$
if and only if
$g_1^{\deg(f)}/f^{\deg(g_1)}, \ldots, g_n^{\deg(f)}/f^{\deg(g_n)}$
generate the unit ideal in $S_{(f)}$.
\end{enumerate}
\end{theorem}\label{chap4thm:graded_ring_localization_iso}
\begin{proof}
We only prove $1.(a)-1.(e)$ and the remaining part can be found at \href{https://stacks.math.columbia.edu/tag/01M4}{Stack Project 26.8}.

\begin{enumerate}[label=(\alph*)]
\item
$f$ is is invertible in $(S_\bullet)_g$ by~\ref{chap3exr:inclusion_distinguished_open}. And $f^{\deg g}/g^{\deg f}$ is an invertible element an element in $((S_\bullet)_g)_0$ because it is not contained in any prime ideal in $((S_\bullet)_g)_0$. ($f/1$ is not contained in any prime ideal in $(S_\bullet)_g$ because $f/1$ is invertible.)
\item Then the inverse of $f$ in $(S_\bullet)_g$ can be written as $a'/g^d$ and $fa'/g^d=1/1$. We can replace $a'$ by its homogeneous part $a''$ and $(fa''-g^d)/1=0/1$ $g^k(fa-g^d)=0$. Then after  defining $a:=a''g^k$, we get $fa=g^e$, for $e=k+d$.
\item The morphism exists by universal property of localization. It maps $b/f^n$ to $a^nb/g^{ne}$. 

\item This clearly induce a map of the degree $0$ ring, $((S_\bullet)_f)_0\to ((S_\bullet)_g)_0$.
\item We need to look the ring morphism $((S_\bullet)_f)_0\to ((S_\bullet)_g)_0$ in detail. It is induced by 
$$
\phi:\left(\frac{b}{f^n}\right)_0\mapsto \left(\frac{a^n b}{g^{ne}}\right)_0
$$
In particular
$$
\frac{g^{\deg f}}{f^{\deg g}}\mapsto \frac{a^{\deg g}}{g^{e\deg g-\deg f}}
$$
Because $g^{\deg f}/f^{\deg g}$ is invertible in $(S_\bullet)_0 $, it induces a morphism
$$
\tilde{\phi}:(((S_\bullet)_f)_0)_{g^{\deg f}/f^{\deg g}}
\lrta ((S_\bullet)_g)_0
$$
$$
\begin{aligned}
\left(\frac{b}{f^n}\right)_0/\left(\frac{g^{\deg f}}{f^{\deg g}}\right)^m&\mapsto \phi\left(\frac{b}{f^n}\right)_0/\phi\left(\frac{g^{\deg f}}{f^{\deg g}}\right)^m\\
&=\left(\frac{\left(a^nb/g^{ne}\right)}{\left(a^{\deg g}/g^{e\deg g-\deg f}\right)^m}\right)_0\\
&=\left(\frac{a^{n-m\deg g}b}{g^{m\deg f-me\deg g+ne}}\right)_0\\
&=\left(\frac{b}{g^{m\deg f}f^{n-m\deg g}}\right)_0
\end{aligned}
$$
This morphism is surjective because $f$ is invertible in $(S_\bullet)_g$. Then we can look at the kernel of this ring morphism. If
$$
\left(\frac{b}{g^{m\deg f}f^{n-m\deg g}}\right)_0=0,
$$
It means exactly the degree $0$ part of $b/f^n$ is zero. Hence we have the isomorphism.
\end{enumerate}
\end{proof}

\begin{exr}
By checking that these gluings behave well on triple overlaps (see Exercise~\ref{chap3exr:glue_sheaf}), finish the definition of the scheme $\Proj S_\bullet$ .
\end{exr}
\begin{proof}
$D(f)$ give an open cover of the topological space of $X:=\Proj S_\bullet$. We identify the $\calo_{X,f}$ to be the structure sheaf of $\spec ((S_\bullet)_f)_0$: $\calo_{\spec ((S_\bullet)_f)_0}$.

$D(f)\cap D(g)=D(fg)$, we have the isomorphism of sheaves:
$$
\phi_{f,g}:\calo_{X,f}|_{D(fg)}\lrta \calo_{X,g}|_{D(fg)}.
$$
$$
\calo_{\spec ((S_\bullet)_f)_0}|_{D(g^{\deg f}/f^{\deg g})}\lrta \calo_{\spec ((S_\bullet)_g)_0}|_{D(f^{\deg g}/g^{\deg f})}
$$
We want to verify the cocycle relation on $D(fgh)$. We verify the cocycle relation on a base of topology. The distinguished base of $\spec (S_\bullet)_{fgh})_0$ is also induced by distinguished open in $\Proj S_\bullet$.

\underline{Want}:
$$
\phi_{f,h}(D(fghk))=\phi_{g,h}(D(fghk))\circ \phi_{f,g}(D(fghk)),\forall k\text{ homogeneous in $S_+$}.
$$
Notice that sheaf morphism is commutative with restriction maps. It suffices to check
$$
\phi_{f,h}(D(fgh))=\phi_{g,h}(D(fgh))\circ \phi_{f,g}(D(fgh)).
$$
$$
\begin{aligned}
\calo_{X,f}(D(fg))
&=\calo_{\spec ((S_\bullet)_f)_0}({D(g^{\deg f}/f^{\deg g})})\\
&=((S_\bullet)_f)_0)_{g^{\deg f}/f^{\deg g}},
\end{aligned}
$$
\underline{Claim}:
$$
((S_\bullet)_f)_0)_{g^{\deg f}/f^{\deg g}}\cong ((S_\bullet)_{fg})_0
$$
This isomorphism is already discussed in Theorem~\ref{chap4thm:graded_ring_localization_iso}.
We have the isomorphisms
$$
((S_\bullet)_f)_0)_{(gh)^{\deg f}/f^{\deg g+\deg h}}\cong ((S_\bullet)_{fgh})_0.
$$
Similarly, we have other two isomorphisms and the $\phi_{f,h}(D(fgh))$ is the composition of these ring isomorphism
\begin{center}
\tiny
\begin{tikzcd}
 &  &  &  & \calo_{X,h}(D(fgh))=((S_\bullet)_h)_0)_{(fg)^{\deg h}/h^{\deg f+\deg g}} \arrow[ldd] \\
 &  &  &  &  \\
\calo_{X,f}(D(fgh))=((S_\bullet)_f)_0)_{(gh)^{\deg f}/f^{\deg g+\deg h}} \arrow[rrr] \arrow[rrrrdd, "\phi_{fg}(D(fgh))"'] \arrow[rrrruu, "{\phi_{f,h}(D(fgh))}"] &  &  &  ((S_\bullet)_{fgh})_0 &  \\
 &  &  &  &  \\
 &  &  &  & \calo_{X,g}(D(fgh))=((S_\bullet)_g)_0)_{(fh)^{\deg g}/g^{\deg f+\deg h}} \arrow[luu] \arrow[uuuu, "{\phi_{g,h}(D(fgh))}"']
\end{tikzcd}
\end{center}

This means we can legally glue the structure sheaf of distinguished opens and there is a unique way to define the structure sheaf of $\Proj S_\bullet$.
\end{proof}

\begin{exr}\label{chap4exr:structure_sheaf_of_projective_schemes}
(Some will find this essential, others will prefer to ignore it.) (Re)interpret the structure sheaf of $\Proj S_\bullet$ in terms of compatible germs.
\end{exr}
\begin{proof}
We have to first discuss what the stalk of the structure sheaf $\calf:=\calo_{\Proj S_\bullet}$ is.

By definition
$$
\calf_{[P]}=\dirlim_{[P]\in U} \calf(U),
$$
where $[P]\in \Proj S_\bullet$ and $P$ is a homogeneous prime in $S_\bullet$.
Assume $[P]\in D(f)$ for a homogeneous element $f\in S_\bullet$, we define the structure sheaf on $D(f)$ to be the structure sheaf of $\spec ((S_\bullet)_f)_0$. $P$ corresponds to an ordinary prime $\scp\in ((S_\bullet)_f)_0$.

Recall the form of stalks of a affine scheme, we have the isomorphism
$$
\calf_{[P]}\cong (((S_\bullet)_f)_0)_\scp=:(S_{(f)})_\scp.
$$
This notation is terrifying, the second subscript means localize at an element and the forth subscript means localize at a prime $\scp$. And we will abbreviate it a little by writing $((S_\bullet)_f)_0$ as $S_{(f)}$, do not confuse it with localize at a prime ideal $(f)$. 

For an open set $U\subset\Proj S_\bullet$, $U$ is covered by $\{D(g)\}_{g\in G}$. Each stalk at $[P]$ should be interpreted as the equivalence class
$$
\calf_{[P]}:=\coprod_{(g,\scp)\in P}(S_{(g)})_{\scp_g}/\sim_{[P]}
$$
where $(g,\scp)\in P$ means $D(g)\ni [P]$ and $P\cap S_{(g)}=\scp$.
$$
(S_{(g)})_{\scp}\ni s_{g,\scp}\sim_{[P]} s_{f,\scq}(S_{(f)})_{\scq_f}\text{ iff } (g,\scp)\in P, (f,\scq)\in P\text{ and }
 s_{q,\scp}/1= s_{f,\scq}/1\in S_{(fg)}.
$$
Then we can interpret the sections in $\calf(U)$ via compatible germs
$$
\left\{\prod_{[P]}s_{[P]}\in\prod_{[P]\in U} \calf_{[P]}: \begin{matrix}
&\forall [Q]\in U, \exists D(f)\ni [Q] \text{ and }\tilde{s}\in S_{(f)}\text{ s.t. }\\
&\tilde{s}|_\scq/\sim_{[K]}=s_{[K]},\forall (f,\scq)\in K,\forall [K]\in D(g)\cap U
\end{matrix}
 \right\}
$$
where $\tilde{s}|_\scq$ means taking $\tilde{s}/1\in (S_{(f)})_\scq$.
\end{proof}

\begin{exr}
Check that defining $\proj^n_A$ as $\Proj A[x_1,...,x_n]$ agrees with our earlier construction by patching up specific affine schemes. (How do you know that the $D(x_i)$ cover $\Proj A[x_0,...,x_n]$?)

\end{exr}
\begin{proof}
We have already checked the new definition $\Proj A[x_1,..,x_n]$ is compatible with patching up all $D(f)$. $D(x_i)$ is only a special case. We only need to check $D(x_i)$ indeed covers $\Proj$
$V(x_i)=\Proj A[x_1,...,x_n] -D(x_i)$ and
$$
\cap_i^n V(x_i)=V\left(\sum_i^n (x_i)\right)=V((x_1,...,x_n))
$$
But $(x_1,...,x_n)$ is $S_+$ in the case $S_\bullet=A[x_1,..,x_n]$.
We have 
$$
\Proj A[x_1,..,x_n]-\cup_i D(x_i)=\cap_i V(x_i)=V(S_+)=\emptyset.
$$
\end{proof}

\begin{exr}
Suppose that $k$ is an algebraically closed field. We know from Exercise 4.4.F that the closed points of $\proj^n_k$ , are in bijection with the points of classical projective space. With our new definition of projective space, a point of classical projective space corresponds to a homogeneous prime ideal of $k[x_0,...,x_n]$. Which homogeneous prime ideal is it?
\end{exr}
\begin{proof} Assume $a_0\neq 0$,
$[a_0,...,a_n]$ corresponds to $(x_{1/0}-a_1/a_0,...,x_{n/0}-a_n/a_0)$ in the affine chart $D(x_0)$.

$(x_{1/0}-a_1/a_0,...,x_{n/0}-a_n/a_0)\subset (k[x_0,...,x_n]_{x_0})_0$ would corresponds to a homogeneous prime ideal in $k[x_0,...,x_n]$, as shown in~\ref{chap4exr:homogeneous_ideal_characterization}. We can construct the homogeneous prime by constructing it degree by degree and we omit the process and only list the final result (because we know it)
$$
\left(x_1-\frac{a_1}{a_0}x_0,...,x_n-\frac{a_n}{a_0}x_0\right)
$$
\end{proof}

\begin{exr}
If $S_\bullet$ is generated in degree $1$, and $f \in S_+$ is homogeneous, explain how to define $V(f)$ ``in'' $\Proj S_\bullet$ the vanishing scheme of $f$. 
(Warning: $f$ in general isn?t a function on $\Proj S_\bullet$ ). Hence define $V(I)$ for any homogeneous ideal $I$ of $S_+$.
\end{exr}
\begin{proof}
It is customary to define the topological space of $V(f)$ as the the homogeneous prime ideals containing $f$. The trouble is how define the structure sheaf on $V(f)$. 

In the affine case $V(I)=\spec A/I$. In the projective space assume $I$ or $f$ homogeneous, we can still define the vanishing scheme to be
$$
\Proj S_\bullet/I,\ \ \ \Proj S_\bullet/(f),
$$
which are topologically homeomorphic to $V(I)$ and $V(f)$ in $\proj S_\bullet$.


These two are well-defined schemes,
the subtlety lies in how to interpret them as subschemes of $\Proj S_\bullet$. These would be a long story and the key word is closed subscheme.
\end{proof}

\begin{exr}
Suppose $k$ is algebraically closed. Describe a natural bijection between one-dimensional subspaces of $V$ and the closed points of $\proj V$. Thus this construction canonically (in a basis-free manner) describes the one-dimensional subspaces of the vector space $V$.
\end{exr}
\begin{proof}
We define $\proj V$ to be $\Proj (\sym^\bullet V^\vee)$ and we already know $\sym^\bullet V^\vee\cong k[x_0,...,x_n]$, where $x_0,..,x_n$ form a basis  of $V^\vee$.

$\sym^\bullet V^\vee$ can be naturally regarded as functions on $V$ by sending $x_i$ to $x_i(v)$.

A closed point in $\Proj k[x_0,...,x_n]$ is of the form $[a_0,...,a_n]$ or $\left(x_1-\frac{a_1}{a_0}x_0,...,x_n-\frac{a_n}{a_0}x_0\right)$. We can define the corresponding one dimensional vector space by 
$$
\left\{v\in V: \left(x_1-\frac{a_1}{a_0}x_0,...,x_n-\frac{a_n}{a_0}x_0\right)v=0\right\}.
$$
In return, we can define the closed point to be the ideal of functions in $\sym^\bullet V^\vee$ that vanishes on the one dimensional linear space.
This gives a natural bijection.
\end{proof}